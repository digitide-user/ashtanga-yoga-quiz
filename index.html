<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>アシュタンガ ヨガ アーサナクイズ</title>
  <link rel="stylesheet" href="css/style.css?v=20250830-10" />
  <!-- alias to satisfy legacy path /css/styles.css and avoid MIME warnings -->
  <link rel="stylesheet" href="css/styles.css?v=20250830-10" />

  <!-- ★ Inline config: FORCE ON -->
  <script>
    window.ENABLE_ONLINE_RANKING = true;
    window.STRICT_ONLINE_RANKING = true;
    window.SUPABASE_URL = "https://utpcwlxxmgzkcrwfbiav.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV0cGN3bHh4bWd6a2Nyd2ZiaWF2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY0MTYzNTgsImV4cCI6MjA3MTk5MjM1OH0.lCGFzl0pExl3uqsSh4h0jrPsmtowQ9618q4lZyxX4o4";
    console.log('[RANK CFG] inlined', {
      strict: window.STRICT_ONLINE_RANKING,
      enable: window.ENABLE_ONLINE_RANKING,
      url: (window.SUPABASE_URL||'').slice(0,32)+'…',
      keyLen: (window.SUPABASE_ANON_KEY||'').length
    });
  </script>

  <!-- クイズUIの必須アンカー（元レイアウトに合わせたID） -->
  <main id="quiz-app">
    <div id="quiz-container">
      <div id="image-container"></div>
      <div id="options-container"></div>
      <div id="result-container" class="hidden">
        <div id="score"></div>
        <div id="reward"></div>
        <div class="actions">
          <button id="restart-btn">もう一度</button>
          <button id="share-instagram-btn">Instagramでシェア</button>
          <!-- ランキングは結果画面でのみ表示 -->
          <button id="open-ranking-btn" class="open-ranking-btn" style="display:none">詳細ランキングを見る</button>
        </div>
      </div>
    </div>
  </main>

  <!-- 読込順を保証（キャッシュバスター付き） -->
  <script defer src="js/config.js?v=20250830-13"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2?v=20250830-13"></script>
  <script defer src="js/ranking.js?v=20250830-13"></script>
  <script defer src="js/quiz.js?v=20250830-13"></script>
</head>
<body>
  <div id="app">
    <!-- 既存のクイズUI -->

    <!-- 結果画面側に必ずこのボタンが存在するようにしておく（重複OK） -->
    <button id="viewRankingBtn" data-action="open-ranking" class="btn btn-secondary">
      詳細ランキングを見る
    </button>
  </div>
  
</body>
</html>
